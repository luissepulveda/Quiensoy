<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Skate Park</h1>

    <div class="py-4">
      <h2>Registro</h2>
      <hr class="w-50" />

      <form>
        <div class="form-group row w-50 m-auto">
          <div class="form-group col-12 col-sm-6">
            <label>Email</label>
            <input class="form-control m-auto" id="email"/>
          </div>
          <div class="form-group col-12 col-sm-6">
            <label>Nombre</label>
            <input class="form-control m-auto" id="nombre"/>
          </div>
          <div class="form-group col-12 col-sm-6">
            <label>Password</label>
            <input class="form-control m-auto" type="password" id="password" />
          </div>
          <div class="form-group col-12 col-sm-6">
            <label>Repita la password</label>
            <input class="form-control m-auto" type="password" id="passwordrep"/>
          </div>
          <div class="form-group col-12 col-sm-6">
            <label>Años de experiencia</label>
            <input class="form-control m-auto" id="anios"/>
          </div>
          <div class="form-group col-12 col-sm-6">
            <label>Especialidad</label>
            <input class="form-control m-auto" id="especialidad"/>
          </div>
          <div class="form-group col-12 col-sm-12">
            <label>Foto de perfil</label>
            <input type="file" id="fotoperfil" name="foto"/>
          </div>
        </div>
        <button class="btn btn-info mb-3">Registrarme</button>
        <p><a href="/Login"> Iniciar sesión</a></p>
      </form>
      <script>
            $("form").submit(async function (e) {
              e.preventDefault()
            })

            $("button").click(async function () {
              const password = $("#password").val()
              const passwordrep = $("#passwordrep").val()
              const formdata = new FormData()
              formdata.append("foto", document.querySelector("#fotoperfil").files[0])
              formdata.append("email", $("#email").val())
              formdata.append("nombre", $("#nombre").val())
              formdata.append("password", $("#password").val())
              formdata.append("anios", $("#anios").val())
              formdata.append("especialidad", $("#especialidad").val())
              
              if(password != passwordrep){
                alert("Contraseñas no coinciden!!")
                location.reload()
              }else{
              const data = await axios.post("/usuario", formdata)
              alert('Usuario registrado con exito!')
              window.location.href = '/Login'
              }
            })
      </script>
    </div>
  </body>
</html>
